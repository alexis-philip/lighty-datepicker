class Helpers{static daysInMonth(e,t){return new Date(e,t,0).getDate()}static getWeekday(e,t){var r=new Date(e).getDay();return 0==r&&(r=7),"string"==t?isNaN(r)?null:["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"][r-1]:"number"==t?r:'PARAMETERS: "string" or "number"'}static addZero(e){return 1==e.toString().length?"0"+e:e.toString()}static removeZero(e){return"0"==e[0]?e[1]:e}static removeTable(){for(var e=document.querySelector(".ldp-calendar"),t=e.childNodes.length,r=0;r<t;r++)e.removeChild(e.childNodes[0])}static outputHeader(e){var t=document.querySelector(".output-day"),r=t.dataset.value.split("-");return"year"==e?r[0].toString():"month"==e?r[1].toString():"day"==e?r[2].toString():"string"==e?t.dataset.value:"array"==e?r:'PARAMETERS: "year" or "month" or "day" or "string" or "array"'}static setProperty(e,t,r,s){for(var l=0;l<e.cssRules.length;l++)if(e.cssRules[l].selectorText==t)return void(e.cssRules[l].style[r]=s)}}class BuildDatePicker{build(){var e=document.createElement("div"),t=document.createElement("div"),r=document.createElement("div");e.setAttribute("class","ldp"),t.setAttribute("class","ldp-header"),r.setAttribute("class","ldp-calendar"),document.body.appendChild(e),e.appendChild(t),e.appendChild(r);for(var s=0;s<3;s++){var l=["day","month","year"],a=document.createElement("div");a.setAttribute("class","ldp-header-row"),t.appendChild(a);var d=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div");function p(e,t){var r='<svg class="'+t+'" width="64" height="64" viewBox="0 0 64 64"><path class="ldp-icon-color" d="M3.352,48.296l28.56-28.328l28.58,28.347c0.397,0.394,0.917,0.59,1.436,0.59c0.52,0,1.04-0.196,1.436-0.59   c0.793-0.787,0.793-2.062,0-2.849l-29.98-29.735c-0.2-0.2-0.494-0.375-0.757-0.475c-0.75-0.282-1.597-0.107-2.166,0.456   L0.479,45.447c-0.793,0.787-0.793,2.062,0,2.849C1.273,49.082,2.558,49.082,3.352,48.296z"></svg>';e.insertAdjacentHTML("afterbegin",r)}d.setAttribute("class","ldp-btn "+l[s]+"-up"),i.setAttribute("class","ldp-output output-"+l[s]),o.setAttribute("class","ldp-btn "+l[s]+"-down"),a.appendChild(d),a.appendChild(i),a.appendChild(o),p(d,"ldp-icon-arrow-up "+l[s]+"-up"),p(o,"ldp-icon-arrow-down "+l[s]+"-down")}}createCSS(){var e,t=document.createElement("style");t.type="text/css",t.title="lighty-datepicker",t.appendChild(document.createTextNode(".ldp{user-select: none;-moz-user-select: none;font-family:Calibri;font-size:1em;width:280px;height:380px;position:absolute;display:inline-block;box-shadow:0 0 35px 2px rgba(0,0,0,.38)}.ldp-header{background:#01b1ae;color:#fff;height:25%;position:relative;display:flex;box-shadow:0 15px 32px -16px rgba(0,0,0,.54)}.ldp-header-row{width:calc(100% / 3)}.ldp-btn{height:30%;display:flex;justify-content:center;align-items:center}.ldp-btn:hover{background:#fff;opacity:.1;cursor:pointer}.ldp-icon-arrow-down,.ldp-icon-arrow-up{width:65%;height:65%;user-select:none;-moz-user-select:none;-webkit-user-select:none}.ldp-icon-arrow-down{transform:rotate(180deg)}.ldp-icon-color{fill:#e0e0e0}.ldp-output{display:flex;justify-content:center;align-items:center;height:40%;text-align:center;font-size:33px}.ldp-calendar{height:75%;color:grey;background:#fff}.ldp-cell{display:flex;justify-content:center;align-items:center}.ldp-calendar-header{display:flex;height:14.2857%;border-bottom:1px solid #d3d3d3;font-size:19px}.ldp-calendar-header .ldp-cell{height:100%;width:14.2857%}.ldp-calendar-body{height:85.7143%;font-size:16px}.ldp-row{display:flex;height:16.6666%}.ldp-cell{height:100%;width:14.2857%}.ldp-filled:hover{cursor:pointer}.ldp-selected{background:#01b1ae;color:#fff;border-radius:100px;font-weight:700}.ldp-dot{width:12.5%;height:12.5%;border-radius:100%;background:#d3d3d3}.ldp,.ldp-btn:hover,.ldp-calendar,.ldp-dot,.ldp-header,.ldp-icon-color,.ldp-selected{transition:.5s}")),document.querySelector("head").appendChild(t);for(var r=0;r<document.styleSheets.length;r++)document.styleSheets[r].title==t.title&&(e=document.styleSheets[r]);return e}}class DatePicker{constructor(){this.Build=new BuildDatePicker,this.stylesheet,this.daysArray,this.monthsArray,this.date_picker,this.date_picker_width,this.output_day,this.output_month,this.output_year,this.calendar}initialisation(){this.Build.build(),this.stylesheet=this.Build.createCSS(),this.daysArray=["L","M","M","J","V","S","D"],this.monthsArray=["Janv","Févr","Mars","Avr","Mai","Juin","Juil","Août","Sept","Oct","Nov","Déc"],this.date_picker=document.querySelector(".ldp"),this.output_day=document.querySelector(".output-day"),this.output_month=document.querySelector(".output-month"),this.output_year=document.querySelector(".output-year"),this.calendar=document.querySelector(".ldp-calendar"),this.start()}start(){this.formatedDate("now","build"),this.selectHeader(),this.selectCalendar(),this.displayDatePicker()}formatedDate(e,t){if("now"==e)var r=new Date;else r=new Date(e);var s=r.getFullYear().toString(),l=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,a=(r.getDate()<10?"0"+r.getDate():r.getDate()).toString(),d=r.getDay();return 0==d&&(d=7),"build"==t&&this.inputHeader(s+"-"+l+"-"+a),"string"==t?s+"-"+l+"-"+a:"array"==t?[s,l,a,d.toString()]:'PARAMETERS: "2019-01-01" / "now" (date) AND "build" or "string" or "array"'}inputHeader(e){var t=e.split("-");this.output_day.setAttribute("data-value",t[0]+"-"+t[1]+"-"+t[2]);var r=this.monthsArray[t[1]-1].substring(0,4).toUpperCase();this.output_day.innerHTML=Helpers.removeZero(t[2]),this.output_month.innerHTML=r,this.output_year.innerHTML=t[0];var s=document.querySelector(".lighty-datepicker.active");null!==s&&(s.value=Helpers.outputHeader("string")),this.buildCalendar(e)}buildCalendar(e){var t=e.split("-"),r=Helpers.getWeekday(t[0]+"-"+t[1]+"-01","number"),s=Helpers.daysInMonth(t[0],t[1]),l=1,a=1,d=document.createElement("div");d.setAttribute("class","ldp-calendar-header"),this.calendar.appendChild(d);for(var i=0;i<this.daysArray.length;i++){var o=document.createElement("div"),p=document.createTextNode(this.daysArray[i]);o.setAttribute("class","ldp-cell"),d.appendChild(o),o.appendChild(p)}var n=document.createElement("div");n.setAttribute("class","ldp-calendar-body"),this.calendar.appendChild(n);for(i=1;i<7;i++){var c=document.createElement("div");c.setAttribute("class","ldp-row"),n.appendChild(c);for(var h=1;h<8;h++){if(r<=a&&l<=s){var u=document.createElement("div");p=document.createTextNode(l);u.setAttribute("class","ldp-cell ldp-filled"),u.setAttribute("data-value",t[0]+"-"+t[1]+"-"+Helpers.addZero(l)),u.appendChild(p),c.appendChild(u),l++}else{u=document.createElement("div");var y=document.createElement("div");u.setAttribute("class","ldp-cell"),y.setAttribute("class","ldp-dot"),c.appendChild(u),u.appendChild(y)}a++}}document.querySelector(".ldp-row [data-value='"+e+"']").classList.add("ldp-selected")}selectHeader(){document.querySelector(".ldp-header").addEventListener("click",e=>{"day-up"==e.target.classList[1]&&this.reBuild("day","up"),"day-down"==e.target.classList[1]&&this.reBuild("day","down"),"month-up"==e.target.classList[1]&&this.reBuild("month","up"),"month-down"==e.target.classList[1]&&this.reBuild("month","down"),"year-up"==e.target.classList[1]&&this.reBuild("year","up"),"year-down"==e.target.classList[1]&&this.reBuild("year","down")})}selectCalendar(){this.calendar.addEventListener("click",e=>{if("ldp-filled"==e.target.classList[1]){var t=e.target.dataset.value;Helpers.removeTable(),this.formatedDate(t,"build")}})}reBuild(e,t){var r="",s="",l="",a="",d=0;d=parseInt(Helpers.outputHeader(e)),"up"==t?d+=1:d-=1,"year"==e&&(r=d+"-"+Helpers.outputHeader("month")+"-01"),"month"==e&&(r=13==d?parseInt(Helpers.outputHeader("year"))+1+"-01-01":0==d?parseInt(Helpers.outputHeader("year"))-1+"-12-01":Helpers.outputHeader("year")+"-"+Helpers.addZero(d)+"-01"),"day"==e&&(d>Helpers.daysInMonth(Helpers.outputHeader("year"),Helpers.outputHeader("month"))?r="12"==Helpers.outputHeader("month")?(s=(parseInt(Helpers.outputHeader("year"))+1).toString())+"-01-01":Helpers.outputHeader("year")+"-"+(parseInt(Helpers.outputHeader("month"))+1)+"-01":0==d?"01"==Helpers.outputHeader("month")?r=(s=(parseInt(Helpers.outputHeader("year"))-1).toString())+"-12-"+Helpers.daysInMonth(s,"12"):(l=(parseInt(Helpers.outputHeader("month"))-1).toString(),a=Helpers.daysInMonth(Helpers.outputHeader("year"),l),r=Helpers.outputHeader("year")+"-"+Helpers.addZero(l)+"-"+a):r=Helpers.outputHeader("year")+"-"+Helpers.outputHeader("month")+"-"+Helpers.addZero(d)),Helpers.removeTable(),this.formatedDate(r,"build")}displayDatePicker(){var e=document.querySelector(".ldp");function t(t){"yes"==t?(e.style.display="block",setTimeout(function(){e.style.opacity="1"},1)):(e.style.opacity="0",setTimeout(function(){e.style.display="none"},500))}t("no"),document.addEventListener("mousedown",e=>{if(e.target.classList.contains("lighty-datepicker")){for(var r=document.querySelectorAll(".lighty-datepicker"),s=0;s<r.length;s++)r[s].classList.remove("active");e.target.classList.add("active"),""!==e.target.value?(Helpers.removeTable(),this.formatedDate(e.target.value,"build")):(Helpers.removeTable(),this.formatedDate("now","build"))}if(e.target.classList.contains("lighty-datepicker")&&e.target.classList.contains("active")||e.target.closest(".ldp")){if(e.target.classList.contains("lighty-datepicker")&&e.target.classList.contains("active")){this.customisation();var l=e.target.getBoundingClientRect();this.date_picker.style.display="block";var a=this.date_picker_width,d=1.3571*this.date_picker_width;this.date_picker.style.display="none";var i=l.width,o=l.height,p=window.innerWidth,n=window.innerHeight,c=l.bottom-o,h=l.left,u=(l.right,n-l.bottom);if(u>d+20)this.date_picker.style.top=c+o+20+"px",this.date_picker.style.left=h-(a-i)/2+"px";else if(u<d+20)if(u<(d-20)/2)this.date_picker.style.top=c-d-20+"px",this.date_picker.style.left=h-(a-i)/2+"px";else{var y=c+o/2;this.date_picker.style.top=y-d/2+"px",this.date_picker.style.left=h+i+20+"px"}else this.date_picker.style.top=c+o+20+"px",this.date_picker.style.left=h-(a-i)/2+"px"}t("yes")}else t("no")},!1)}customisation(){Helpers.setProperty(this.stylesheet,".ldp","width","280px"),Helpers.setProperty(this.stylesheet,".ldp","height","380px"),Helpers.setProperty(this.stylesheet,".ldp-output","font-size","33px"),Helpers.setProperty(this.stylesheet,".ldp-calendar-header","font-size","19px"),Helpers.setProperty(this.stylesheet,".ldp-cell","font-size","16px"),Helpers.setProperty(this.stylesheet,".ldp-header","background","#01B1AE"),Helpers.setProperty(this.stylesheet,".ldp-header","color","white"),Helpers.setProperty(this.stylesheet,".ldp-calendar","background","white"),Helpers.setProperty(this.stylesheet,".ldp-calendar","color","grey"),Helpers.setProperty(this.stylesheet,".ldp-selected","background","#01B1AE"),Helpers.setProperty(this.stylesheet,".ldp-selected","color","white"),Helpers.setProperty(this.stylesheet,".ldp-calendar-header","border-bottom","1px solid grey"),Helpers.setProperty(this.stylesheet,".ldp-dot","background","lightgrey"),Helpers.setProperty(this.stylesheet,".ldp-icon-color","fill","#e0e0e0");var e=document.querySelector(".lighty-datepicker.active");if(null!==e.getAttribute("data-lighty_datepicker"))if(""!=e.dataset.lighty_datepicker){var t=e.dataset.lighty_datepicker.split(";");""==t[t.length-1]&&t.pop();for(var r=new Object,s=0;s<t.length;s++){var l=t[s].split(":"),a=l[0],d=l[1];" "==a[0]&&(a=a.substring(1))," "==d[0]&&(d=d.substring(1)),r[a]=d,0}if(void 0!==r.bg_header&&(Helpers.setProperty(this.stylesheet,".ldp-header","background",r.bg_header),Helpers.setProperty(this.stylesheet,".ldp-selected","background",r.bg_header)),void 0!==r.color_header&&(Helpers.setProperty(this.stylesheet,".ldp-header","color",r.color_header),Helpers.setProperty(this.stylesheet,".ldp-selected","color",r.color_header)),void 0!==r.bg_body&&Helpers.setProperty(this.stylesheet,".ldp-calendar","background",r.bg_body),void 0!==r.color_body&&(Helpers.setProperty(this.stylesheet,".ldp-calendar","color",r.color_body),Helpers.setProperty(this.stylesheet,".ldp-calendar-header","border-bottom","1px solid "+r.color_body),Helpers.setProperty(this.stylesheet,".ldp-dot","background",r.color_body)),void 0!==r.bg_icon&&Helpers.setProperty(this.stylesheet,".ldp-icon-color","fill",r.bg_icon),void 0!==r.width){function i(e){return r.width*e/280}this.date_picker_width=r.width,Helpers.setProperty(this.stylesheet,".ldp","width",r.width+"px"),Helpers.setProperty(this.stylesheet,".ldp","height",1.3571*r.width+"px"),Helpers.setProperty(this.stylesheet,".ldp-output","font-size",i(33)+"px"),Helpers.setProperty(this.stylesheet,".ldp-calendar-header",i(19)+"px"),Helpers.setProperty(this.stylesheet,".ldp-cell","font-size",i(16)+"px")}else this.date_picker_width=270}else log('LDP: No data in "data-lighty_datepicker" attribute at the selected input.')}}var nodes=document.querySelectorAll(".lighty-datepicker");if(nodes[0]){var datepicker=new DatePicker;datepicker.initialisation()}